<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<title>Глава 2. Пункт 2</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<script src="script.js" type="text/javascript"></script>
</head>

<body bgColor="#fff5ee">

<p align="center"><a href="ch2_1.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch2_3.htm">Вперёд</a></p>
<script language="JavaScript">double_line();</script>


<h4>2. 2.&nbsp;&nbsp;&nbsp; Сопоставление</h4>

<p>В предыдущем разделе мы видели, как
используются термы для представления сложных
объектов данных. Наиболее<a name="tn275"> важной
операцией над термами является <em><span id="t275">сопоставление</span></em>.
Сопоставление само по себе может производить
содержательные вычисления.</p>

<p>Пусть даны два терма. Будем говорить, что они <em>сопоставимы</em>,
если:</p>

<p>(1)&nbsp;&nbsp;&nbsp; они идентичны или</p>

<p>(2)&nbsp;&nbsp;&nbsp; переменным в обоих термах можно
приписать в качестве значений объекты (т.е.
конкретизировать их) таким образом, чтобы после
подстановки этих объектов в термы вместо
переменных, последние стали идентичными.</p>

<p>Например, термы <strong>дата( Д, М, 1983)</strong> и <strong>дата(
Д1, май, Y1)</strong> сопоставимы. Одной из
конкретизации, которая делает эти термы
идентичными, является следующая: 

<ul>
  <li><strong>Д</strong>&nbsp;&nbsp; заменяется на <strong>&nbsp; Д1</strong></li>
  <li><strong>М</strong>&nbsp;&nbsp; заменяется на <strong>&nbsp; май</strong></li>
  <li><strong>Y1</strong>&nbsp;&nbsp; заменяется на <strong>&nbsp; 1983</strong></li>
</ul>

<p>Более компактно такая подстановка
записывается в привычной форме, т. е. в той, в
которой пролог-система выводит результаты:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д</strong>&nbsp; =&nbsp; <strong>Д1</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>М</strong>&nbsp; =&nbsp; <strong>май</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Y1</strong>&nbsp; =&nbsp; <strong>1983</strong></p>

<p>С другой стороны, <strong>дата( Д, М, 1983)</strong> и <strong>дата(
Д1, Ml, 1944)</strong> не сопоставимы, как и термы <strong>дата(
X, Y, Z)</strong> и <strong>точка( X, Y, Z)</strong></a><a name="tn276">.</a></p>
<a name="tn276">

<p><em><span id="t276">Сопоставление</span></em> - это процесс,
на вход которого подаются два терма, а он
проверяет, соответствуют ли эти термы друг другу.
Если термы не сопоставимы, будем говорить, что
этот процесс терпит <em>неуспех</em>. Если же они
сопоставимы, тогда процесс находит
конкретизацию переменных, делающую эти термы
тождественными, и завершается <em>успешно</em>.</p>

<p>Рассмотрим еще раз сопоставление двух дат.
Запрос на проведение такой операции можно
передать системе, использовав оператор '=':</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>?-&nbsp; дата( Д, М, 1983)&nbsp; =
&nbsp; дата( Д1, май, Y1).</strong></p>

<p>Мы уже упоминали конкретизацию <strong>Д</strong> = <strong>Д1</strong>,
<strong>М</strong> = <strong>май</strong>, <strong>Y1</strong> = <strong>1983</strong>,
на которой достигается сопоставление.
Существуют, однако, и другие конкретизации,
делающие оба терма идентичными. Вот две из них:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д</strong>&nbsp; =&nbsp; <strong>1</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д1</strong>&nbsp; =&nbsp; <strong>1</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>М</strong>&nbsp; =&nbsp; <strong>май</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Y1</strong>&nbsp; =&nbsp; <strong>1983</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д</strong>&nbsp; =&nbsp; <strong>третий</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д1</strong>&nbsp; =&nbsp; <strong>третий</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>М</strong>&nbsp; =&nbsp; <strong>май</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Y1</strong>&nbsp; =&nbsp; <strong>1983</strong></p>

<p>Говорят, что эти конкретизации являются <em>менее
общими</em> по сравнению с первой, поскольку они
ограничивают значения переменных <strong>Д</strong> и <strong>Д1</strong>
в большей степени, чем это необходимо. Для того,
чтобы сделать оба терма нашего примера
идентичными, важно лишь, чтобы <strong>Д</strong> и <strong>Д1</strong>
имели одно и то же значение, однако </a><a name="tn149">само
это значение может быть произвольным. </a>Сопоставление
в Прологе всегда дает <em><span id="t149">наиболее общую
конкретизацию</span></em>. Таковой является
конкретизация, которая ограничивает переменные
в наименьшей степени, оставляя им, тем самым,
наибольшую свободу для дальнейших
конкретизаций, если потребуются новые
сопоставления. В качестве примера рассмотрим
следующий вопрос:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>?-&nbsp; дата( Д, М, 1983)&nbsp; =
&nbsp; дата( Д1, май, Y1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; дата( Д, М,
1983)&nbsp; =&nbsp; дата( 15, М, Y).</strong></p>

<p>Для достижения первой цели система припишет
переменным такие значения:</p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Д&nbsp; = Д1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; М&nbsp; =&nbsp; май<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y1&nbsp; =&nbsp; 1983</strong></p>

<p>После достижения второй цели, значения
переменных станут более конкретными, а именно:</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>Д&nbsp; =&nbsp; 15<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Д1&nbsp; =&nbsp; 15<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; М&nbsp; =&nbsp; май<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y1&nbsp; =&nbsp; 1983<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y&nbsp; =&nbsp; 1983</strong></p>

<p>Этот пример иллюстрирует также и тот факт, что
переменным по мере вычисления
последовательности целей приписываются обычно
все более и более конкретные значения.</p>

<p>Общие правила выяснения, сопоставимы ли два
терма <strong>S</strong> и <strong>Т</strong>, таковы:</p>
<script language="JavaScript">line();</script>


<p><strong>(1)&nbsp;&nbsp;&nbsp; Если S и Т - константы, то S и Т
сопоставимы, только если они являются одним и тем
же объектом.</strong></p>

<p><strong>(2)&nbsp;&nbsp;&nbsp; Если S - переменная, а Т -
произвольный объект, то они сопоставимы, и S
приписывается значение Т. Наоборот, если Т
-переменная, а S -произвольный объект, то Т
приписывается значение S.</strong></p>

<p><strong>(3)&nbsp;&nbsp;&nbsp; Если S и Т - структуры, то они
сопоставимы, только если</strong></p>

<p><strong>(а)&nbsp;&nbsp;&nbsp; S и Т имеют одинаковый главный
функтор<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; и<br>
(б)&nbsp;&nbsp;&nbsp; все их соответствующие компоненты
сопоставимы.</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Результирующая
конкретизация определяется сопоставлением
компонент.</strong></p>
<script language="JavaScript">line();</script>


<p>Последнее из этих правил можно наглядно
представить себе, рассмотрев древовидное
изображение термов, такое, например, как на рис.
2.7. Процесс сопоставления начинается от корня
(главных функторов). Поскольку оба функтора
сопоставимы, процесс продолжается и
сопоставляет соответствующие пары аргументов.
Таким образом, можно представить себе, что весь
процесс сопоставления состоит из следующей
последовательности (более простых) операций
сопоставления:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; треугольник&nbsp; =
&nbsp; треугольник,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; точка( 1, 1)&nbsp; =&nbsp; X,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; А&nbsp; =&nbsp; точка( 4, Y),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; точка( 2, 3)&nbsp; =&nbsp; точка( 2,
Z).</strong></p>

<p>Весь процесс сопоставления успешен, поскольку
все сопоставления в этой последовательности
успешны. Результирующая конкретизация такова:</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>Х&nbsp; =&nbsp;
точка( 1, 1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; А&nbsp; =&nbsp; точка( 4, Y)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Z&nbsp; =&nbsp; 3</strong></p>

<p>В приведенном ниже примере показано, как
сопоставление само по себе можно использовать
для содержательных вычислений. Давайте вернемся
к простым геометрическим объектам с рис. 2.4 и
напишем фрагмент программы для распознавания
горизонтальных и вертикальных отрезков.
&quot;Вертикальность&quot; - это свойство отрезка,
поэтому его можно формализовать в Прологе в виде
унарного отношения. Рис. 2.8 помогает
сформулировать это отношение. Отрезок</p>

<p align="center"><img src="pic/fig2_7.gif" width="377" height="427"
alt="fig2_7.gif (2260 bytes)"></p>

<p align="center"><small><strong>Рис.&nbsp; 2. 7.</strong> &nbsp;&nbsp;
Сопоставление</small> <strong><small>треугольник(( точка( 1,
1), А, точка( 2, 3)) = треугольник( Х, точка( 4, Y),</small><br>
<small>точка( 2, Z))</small></strong></p>

<p>является вертикальным, если <em>x</em>-координаты
его точек-концов совпадают; никаких других
ограничений на отрезок не накладывается.
Свойство &quot;горизонтальности&quot; формулируется
аналогично, нужно только в этой формулировке <em>х</em>
и <em>y</em> поменять местами. Следующая программа,
содержащая два факта, реализует эти
формулировки:</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>верт( отр(
точка( Х, Y), точка( Х, Y1) ) ).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; гор( отр( точка( Х, Y), точка(
Х1, Y) ) ).</strong></p>

<p>С этой программой возможен такой диалог:</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>?-&nbsp; верт(
отр( точка( 1, 1), точка( 1, 2) ) ).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; да</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?-&nbsp; верт( отр(
точка( 1, 1), точка( 2, Y) ) ).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; нет</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?-&nbsp; гор( отр( точка(
1, 1), точка( 2, Y) ) ).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y&nbsp; =&nbsp; 1</strong></p>

<p>На первый вопрос система ответила &quot;да&quot;,
потому. что цель, поставленная в вопросе,
сопоставима с одним из фактов программы. Для
второго вопроса сопоставимых фактов не нашлось.
Во время ответа на третий вопрос при
сопоставлении с фактом о горизонтальных
отрезках Y получил значение 1.</p>

<p align="center"><img src="pic/fig2_8.gif" width="392" height="264"
alt="fig2_8.gif (1466 bytes)"></p>

<p align="center"><small><strong>Рис. 2. 8.</strong>&nbsp; Пример
вертикальных и горизонтальных отрезков прямых.</small></p>

<p>Сформулируем более общий вопрос к программе:
&quot;Существуют ли какие-либо вертикальные
отрезки, начало которых лежит в точке (2,3)?&quot;</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>?-&nbsp; верт(
отр( точка( 2, 3), Р) ).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Р&nbsp; =&nbsp; точка( 2, Y)</strong></p>

<p>Такой ответ означает: &quot;Да, это любой отрезок,
с концом в точке (2,Y), т. е. в произвольной точке
вертикальной прямой <em>х</em> = 2&quot;. Следует
заметить, что ответ пролог-системы возможно
будет выглядеть не так красиво, как только что
описано, а (в зависимости от реализации)
приблизительно следующим образом:</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>Р&nbsp; =&nbsp;
точка( 2, _136)</strong></p>

<p>Впрочем, разница здесь чисто внешняя. В данном
случае <strong>_136</strong> - это неинициализированная
переменная. Имя <strong>_136</strong> - законное имя
прологовской переменной, которое система
построила сама во время вычислений. Ей
приходится генерировать новые имена, для того
чтобы переименовывать введенные пользователем
переменные в программе. Это необходимо по двум
причинам: первая - одинаковые имена обозначают в
разных предложениях разные переменные; и вторая -
при последовательном применении одного и того же
предложения используется каждый раз его
&quot;копия&quot; с новым набором переменных.</p>

<p>Другим содержательным вопросом к нашей
программe является следующий: &quot;Существует ли
отрезок, который одновременно и горизонтален в
вертикален?&quot;</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>?-&nbsp; верт( S),
гор( S).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S&nbsp; =&nbsp; отр( точка( Х, Y),
точка( Х, Y) )</strong></p>

<p>Такой ответ пролог-системы следует, понимать
так: &quot;да, любой отрезок, выродившийся в точку,
обладает как свойством вертикальности, так и
свойством горизонтальности одновременно&quot;.
Этот ответ снова получен лишь из сопоставления.
Как и раньше, в ответе вместо Х и Y могут появиться
некоторые имена, сгенерированные системой. </p>

<h4>Упражнения</h4>

<p><strong>2. 3.</strong>&nbsp;&nbsp;&nbsp; Будут ли следующие
операции сопоставления успешными или
неуспешными? Если они будут успешными, то какова
будет результирующая конкретизация переменных?</p>

<p>&nbsp;&nbsp;&nbsp; (а)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>точка(
А, В) = точка( 1, 2)</strong><br>
&nbsp;&nbsp;&nbsp; (b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>точка( А,
В) = точка( X, Y, Z)</strong><br>
&nbsp;&nbsp;&nbsp; (c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>плюс( 2, 2) =
4</strong><br>
&nbsp;&nbsp;&nbsp; (d)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>+( 2, D)= +( Е,
2)</strong><br>
&nbsp;&nbsp;&nbsp; (е)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<strong>треугольник(
точка( -1, 0), Р2, Р3) =<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; треугольник( Р1, точка( 1, 0), точка( 0, Y)</strong></p>

<p>Результирующая конкретизация определяет
семейство треугольников. Как бы Вы описали это
семейство?</p>

<p><a href="javascript:fa('2_3')">Посмотреть ответ</a></p>

<p><strong>2. 4</strong>&nbsp;&nbsp;&nbsp; Используя представление
отрезков, применявшееся в данной разделе,
напишите терм, соответствующий любому отрезку на
вертикальной прямой <em>x = 5</em>.</p>

<p><a href="javascript:fa('2_4')">Посмотреть ответ</a></p>

<p><strong>2. 5.</strong>&nbsp;&nbsp;&nbsp; Предположим, что
прямоугольник представлен термом <strong>прямоугольник(
P1, P2, P3, Р4)</strong>, где <strong>Р</strong> - вершины
прямоугольника, положительно упорядоченные.
Определите отношение</p>

<p><strong>&nbsp;&nbsp; </strong>&nbsp;&nbsp;&nbsp;&nbsp; <strong>регулярный( R)</strong></p>

<p>которое имеет место, если R - прямоугольник с
вертикальными и горизонтальными сторонами.</p>

<p><a href="javascript:fa('2_5')">Посмотреть ответ</a></p>

<hr>

<p align="center"><a href="ch2_1.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch2_3.htm">Вперёд</a></p>
</body>
<script language="JavaScript">

hl();

</script>

</html>
