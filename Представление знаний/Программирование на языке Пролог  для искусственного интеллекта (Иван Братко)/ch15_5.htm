<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<title>Глава 15. Пункт 5</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<script src="script.js" type="text/javascript"></script>
</head>

<body bgColor="#fff5ee">

<p align="center"><a href="ch15_4.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch15_6.htm">Вперёд</a></p>
<script language="JavaScript">double_line();</script>


<h4>15. 5.&nbsp;&nbsp;&nbsp; Знания о типовых ситуациях и
механизм &quot;советов&quot;</h4>

<p>В этом разделе рассматривается метод
представления знаний о конкретной игре с
использованием семейства Языков Советов. Языки
Советов (Advice Languages) дают возможность пользователю
декларативным способом описывать, какие идеи
следует использовать в тех или иных типовых
ситуациях. Идеи формулируются в терминах целей и
средств, необходимых для их достижения.
Интерпретатор Языка Советов определяет при
помощи перебора, какая идея &quot;работает&quot; в
данной ситуации.</p>
<a name="p15_5_1">

<hr>
</a>

<h4>15. 5. 1.&nbsp;&nbsp;&nbsp; Цели и ограничения на <a name="tn347">ходы</h4>

<p>Основное понятие Языка Советов -
&quot;элементарный совет&quot;. <span id="t347">Элементарный
совет</span> содержит указание о том, что следует
делать (или <em>пытаться</em> делать) в некоторой
типовой ситуации. Совет выражается в терминах
тех <em>целей</em>, которые необходимо достичь, и тех <em>средств</em>,
которые следует применять для этого. Мы называем
участников игры &quot;игроком&quot; и
&quot;противником&quot;; совет всегда относится к
&quot;игроку&quot;. Каждый элементарный совет имеет
следующие четыре составные части</a><a name="tn85">: 

<ul>
  <li><em><span id="t85">главная цель</span></em>: цель, к которой
    нужно стремиться;</li>
  <li><em>цель-поддержка</em>: цель, которая</a> должна
    постоянно удовлетворяться в процессе достижения<a
    name="tn181"> главной цели;</li>
  <li><em><span id="t181">ограничения на ходы игрока</span></em>:
    предикат, определяющий некоторое подмножество
    ходов из всех разрешенных ходов игрока (ходы,
    представляющие интерес с точки зрения
    достижения указанных целей).</li>
  <li><em>ограничения на ходы противника</em>: предикат,
    выбирающий ходы, которые должен рассмотреть
    противник (ходы, препятствующие достижению
    указанных целей).</li>
</ul>

<p>Рассмотрим, например, шахматный эндшпиль
&quot;король и пешка против короля&quot;. Здесь
применима следующая очевидная идея: провести
пешку в ферзи, продвигая ее вперед. В форме совета
это выражается так: 

<ul>
  <li><em>главная цель</em>: провести пешку;</li>
  <li><em>цель-поддержка</em>: не потерять пешку;</li>
  <li><em>ходы игрока</em>: продвигать пешку;</li>
  <li><em>ходы противника</em>: приближаться королем к
    пешке</a><a name="tn348">.</li>
</ul>
</a><a name="p15_5_2">

<hr>
</a>

<h4>15. 5. 2.&nbsp;&nbsp;&nbsp; <span id="t348">Выполнимость совета</span></h4>

<p>Мы говорим, что элементарный совет <em>выполним</em>
в данной позиции, если игрок может форсированным
образом достигнуть главной цели, указанной в
совете, при условии, что:</p>

<p>&nbsp;&nbsp;&nbsp; (1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ни разу не
нарушается цель-поддержка;</p>

<p>&nbsp;&nbsp;&nbsp; (2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; все ходы
игрока удовлетворяют наложенным на них
ограничениям;</p>

<p>&nbsp;&nbsp;&nbsp; (3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; противнику
разрешено делать только те ходы, которые
предусмотрены соответствующими ограничениями<a
name="tn323">.</p>

<p>С выполнимостью элементарного совета связано
понятие <em><span id="t323">форсированного дерева</span></em>.
Форсированное дерево задает детальную
стратегию, которая гарантирует достижение
главной цели при выполнении всех ограничений,
содержащихся в элементарном совете. Таким
образом, форсированное дерево указывает, как
именно должен ходить игрок при любых ответах
противника. Более точно, форсированное дерево
&nbsp; Т&nbsp; для заданной позиции&nbsp; Р&nbsp; и
элементарного совета&nbsp; А&nbsp; есть такое
поддерево дерева игры, что 

<ul>
  <li>корень дерева&nbsp; Т&nbsp; -&nbsp; позиция&nbsp; Р;</li>
  <li>все позиции из&nbsp; Т&nbsp; удовлетворяют
    цели-поддержке;</li>
  <li>все терминальные позиции из&nbsp; Т &nbsp;
    удовлетворяют главной цели (что, однако, неверно
    ни для одной внутренней вершины);</li>
  <li>для каждой внутренней позиции игрока в дереве Т
    указан только один ход, причем он удовлетворяет
    ограничениям на ходы игрока;</li>
  <li>из каждой внутренней позиции противника
    исходят все ходы противника (удовлетворяющие
    соответствующим ограничениям).</li>
</ul>

<p>Каждый элементарный совет можно рассматривать
как описание некоторой небольшой специальной
игры, имеющей следующие правила. Участникам игры
разрешено ходить в пределах ограничений,
наложенных на их ходы; позиция, не
удовлетворяющая цели-поддержке, считается
выигрышем &quot;противника&quot;. Нетерминальная
позиция считается выигранной с точки зрения
игрока, если данный элементарный совет в ней
выполним. Таким образом, для того, чтобы выиграть
в зтой игре, игрок должен следовать стратегии,
задаваемой форсированным деревом.</p>
</a><a name="p15_5_3">

<hr>
</a>

<h4>15. 5. 3.&nbsp;&nbsp;&nbsp; Правила и таблицы советов</h4>

<p>В Языках Советов отдельные элементарные советы
объединяются в полную схему представления
знаний, имеющую следующую иерархическую
структуру. Элементарный совет является<a name="tn311">
частью &quot;если-то&quot;-правила. Набор
&quot;если-то&quot;-правил образует <em><span id="t311">таблицу
советов</span></em>. Множество таблиц советов имеет
структуру иерархической сети. Каждая таблица
советов выполняет роль эксперта в своей узкой
области и работает с какой-нибудь специфической
подзадачей. Примером такого специализированного
эксперта может служить таблица советов,
содержащая знания о том, как поставить мат
королем и ладьей. Эта таблица вызывается в том
случае, когда в процессе игры возникает
соответствующее окончание.</p>

<p>Мы рассмотрим здесь упрощенную версию Языка </a><a
name="tn18">Советов, допускающую только одну таблицу
советов. Будем называть эту версию Язык Советов 0
или, для краткости, <span id="t18">AL0 (Advice Language 0)</span>. Ниже
описывается структура языка AL0, синтаксически
специально приспособленная для удобной
реализации на Прологе.</p>

<p>Программа на AL0 называется <em>таблицей советов</em>.
Таблица советов представляет из себя <em>упорядоченное</em>
множество &quot;если-то&quot;-правил. Каждое правило
имеет вид:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>ИмяПравила:&nbsp; если
&nbsp; Условие&nbsp; то&nbsp; СписокСоветов</strong></p>

<p><strong>Условие</strong>&nbsp; -&nbsp; это логическое
выражение, состоящее из имен предикатов,
соединенных между собой логическими связками <strong>и</strong>,
<strong>или</strong>, <strong>не</strong>.&nbsp; <strong>СписокСоветов</strong>
- список имен элементарных советов. Приведем
пример правила под названием &quot;правило_края&quot;
из окончания &quot;король и ладья против короля&quot;:</p>

<p>&nbsp;&nbsp;&nbsp; <strong>правило_края:</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; если
король_противника_на_краю и короли_рядом</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; то [мат_2, потеснить,
приблизиться,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
сохранить_простр, отделить].</strong></p>

<p>В этом правиле говорится: если в текущей
позиции король противника находится на краю
доски, а король игрока расположен близко к королю
противника (точнее, расстояние между королями
меньше четырех клеток), то попытаться выполнить в
указанном порядке предпочтения следующие
советы: &quot;мат_2&quot;, &quot;потеснить&quot;,
&quot;приблизиться&quot;, &quot;сохранить_простр&quot;,
&quot;отделить&quot;. Элементарные советы расположены
в порядке убывания их &quot;притязаний&quot; на успех:
сначала попытаться поставить мат в два хода, если
не получится - &quot;потеснить&quot; короля противника
в угол и т.д. Обратите внимание на то, что при
соответствующем определении операторов наше
правило станет синтаксически корректным
предложением Пролога.</p>

<p>Для представления элементарных советов в виде
прологовских предложений предназначен еще один
формат:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>совет( ИмяСовета,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ГлавнаяЦель:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ЦельПоддержка:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ХодыИгрока:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ХодыПротивника).</strong></p>

<p>Цели представляются как выражения, состоящие
из имен предикатов и логических связок <strong>и</strong>,
&nbsp; <strong>или</strong>,&nbsp; <strong>не</strong>.&nbsp; Ограничения
на ходы сторон - это тоже выражения, состоящие из
имен предикатов и связок <strong>и</strong>&nbsp; и <strong>затем</strong>:&nbsp;
связка&nbsp; <strong>и</strong>&nbsp; имеет обычный
логический смысл, а&nbsp; <strong>затем</strong> &nbsp; задает
порядок. Например, ограничение, имеющее вид</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Огр1&nbsp; затем &nbsp;
Огр2</strong></p>

<p>означает: сначала рассмотреть ходы,
удовлетворяющие ограничению <strong>Oгp1</strong>, а
затем - ходы, удовлетворяющие <strong>Огр2</strong>.</p>

<p>Например, элементарный совет, относящийся к
мату в два хода в окончании &quot;король и ладья
против короля&quot;, записанный в такой
синтаксической форме, имеет вид:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>совет( мат_2,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
мат:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
не потеря_ладьи:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(глубина = 0) и разреш затем<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(глубина = 2) и ход_шах :<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(глубина = 1) и разреш ).</strong></p>

<p>Здесь главная цель&nbsp; -&nbsp; <strong>мат</strong>,
цель-поддержка <strong>не потеря_ладьи</strong>.
Ограничение на ходы игрока означает: на глубине 0
(т. е. в текущей позиции) попробовать любой
разрешенный ход и затем на глубине 2 (следующий
ход игрока) пробовать только ходы с шахом.
Глубина измеряется в полуходах. Ограничение на
ходы противника: любой разрешенный ход на
глубине 1.</p>

<p>В процессе игры таблица советов используется
многократно вплоть до окончания игры, при этом
выполняется следующий основной цикл: построить
форсированное дерево, затем играть в
соответствии с этим деревом, пока не произойдет
выход из него; построить другое форсированное
дерево и т.д. Форсированное дерево строится
каждый раз таким образом: берется текущая
позиция <strong>Поз</strong> и просматриваются одно за
другим все правила таблицы советов; для каждого
правила сопоставляется <strong>Поз</strong> с
предварительным условием этого правила и
просмотр прекращается, когда будет обнаружено
правило, для которого <strong>Поз</strong> удовлетворяет
предварительному условию. В этом случае надо
рассмотреть список советов найденного правила:
обработать элементарные советы один за другим,
пока не будет построено форсированное дерево,
представляющее собой детальную стратегию игры в
этой позиции.</p>

<p>Следует обратить внимание на существенность
того порядка, в котором перечисляются правила в
таблице советов. Правило, которое реально
используется, - это первое из тех правил,
предварительные уловия которых согласуются с
текущей позицией. Для любой возможной позиции
должно существовать по крайней мере одно такое
правило. Из него берется список советов, и первый
из выполнимых советов списка используется в
игре.</p>

<p>Таким образом, таблица советов это программа в
высшей степени непроцедурного характера.
Интерпретатор языка AL0 принимает на входе
некоторую позицию, а затем, &quot;исполняя&quot;
таблицу советов, строит форсированное дерево,
определяющее стратегию игры в этой позиции.</p>

<hr>
</a>

<p align="center"><a href="ch15_4.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch15_6.htm">Вперёд</a></p>
</body>
<script language="JavaScript">

hl();

</script>

</html>
