<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<title>Глава 15. Пункт 2</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<script src="script.js" type="text/javascript"></script>
</head>

<body bgColor="#fff5ee">

<p align="center"><a href="ch15_1.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch15_3.htm">Вперёд</a></p>
<a name="tn165"><script language="JavaScript">double_line();</script>


<h4>15. 2.&nbsp;&nbsp;&nbsp; <span id="t165">Минимаксный принцип</span></h4>

<p>Для игр, представляющих интерес, полный
просмотр игрового дерева невозможен, поэтому
были разработаны другие методы,
предусматривающие просмотр только части дерева
игры. Среди этих методов существует страндартный
метод поиска, используемый в игровых (особенно в
шахматных) программах и основанный на <em>минимаксном</em>
принципе. Дерево игры просматривается только
вплоть до некоторой глубины (обычно на несколько
ходов), а затем для всех концевых вершин дерева
поиска вычисляются оценки при помощи некоторой
оценочной функции. Идея состоит в том, чтобы,
получив оценки этих терминальных поисковых
вершин, не продвигаться дальше и получить тем
самым экономию времени. Далее, оценки
терминальных позиций распространяются вверх по
дереву поиска в соответствии с минимаксным
принципом. В результате все вершины дерева
поиска получают свои оценки. И наконец, игровая
программа, участвующая в некоторой реальной
игре, делает свой ход - ход, ведущий из исходной
(корневой) позиции в наиболее перспективного (с
точки зрения оценки) ее преемника.</p>

<p>Обратите внимание на то, что мы здесь делаем
определенное различие между &quot;деревом игры&quot;
и &quot;деревом поиска&quot;. Дерево поиска - это
только часть дерева игры (его верхняя часть), т. е.
та его часть, которая была явным образом
порождена в процессе поиска. Таким образом,
терминальные поисковые позиции совсем не
обязательно должны совпадать с терминальными
позициями самой игры.</p>

<p>Очень многое зависит от оценочной функции,
которая для большинства игр, представляющих
интерес, является приближенной эвристической
оценкой шансов на выигрыш одного из участников
игры. Чем выше оценка, тем больше у него шансов
выиграть и чем ниже оценка, тем больше шансов на
выигрыш у его противника. Поскольку один из
участников игры всегда стремится к высоким
оценкам, а другой - к низким, мы дадим им имена
МАКС и МИН соответственно. МАКС всегда выбирает
ход с максимальной оценкой; в противоположность
ему МИН всегда выбирает ход с минимальной
оценкой. Пользуясь этим принципом (<em>минимаксным</em>
принципом) и зная значения оценок для всех вершин
&quot;подножья&quot; дерева поиска, можно определить
оценки всех остальных вершин дерева. На рис. 15.2
показано, как это делается. На этом рисунке видно,
что уровни позиций с ходом МАКС'а чередуются с
уровнями позиций с ходом МИН'а. Оценки вершин
нижнего уровня определяются при помощи
оценочной функции. Оценки всех внутренних вершин
можно определить, двигаясь снизу вверх от уровня
к уровню, пока мы не достигнем корневой вершины. В
результате, как видно из рис. 15.2, оценка корня
оказывается равной 4, и, соответственно, лучшим
ходом МАКС'а из позиции&nbsp; <em>а</em>&nbsp; -&nbsp; <em>a-b</em></a><a
name="tn192">. Лучший ответ МИН'а на этот ход&nbsp; -&nbsp; <em>b-d</em>,
и т.д. Эту последовательность ходов называют
также <em><span id="t192">основным вариантом</span></em>.
Основной вариант показывает, какова
&quot;минимаксно-оптимальная&quot; игра для обоих
участников. Обратите внимание на то, что оценки
всех позиций, входящих в основной вариант,
совпадают.</p>

<p align="center"><img src="pic/fig15_2.gif" width="530" height="251"
alt="fig15_2.gif (2982 bytes)"></p>

<p align="center"><small><strong>Рис. 15. 2.</strong>&nbsp; Статические
(нижний уровень) и минимаксные рабочие<br>
оценки вершин дерева поиска. Выделенные ходы
образуют <em>основной<br>
вариант</em>, т. е. минимаксно-оптимальную игру с
обеих сторон.</small></p>

<p>Мы различаем два вида оценок: оценки вершин
нижнего уровня</a><a name="tn302"> и оценки внутренних
вершин</a> (рабочие оценки). Первые из них
называются также <span id="t302">&quot;статическими&quot;</span>,
так как они вычисляются при помощи
&quot;статической&quot; оценочной функции, в
противоположность рабочим оценкам, получаемым
&quot;динамически&quot; при распространении
статических оценок вверх по дереву.</p>

<p>Правила распространения оценок можно
сформулировать следующим образом. Будем
обозначать статическую оценку позиции&nbsp; <em>Р</em>
&nbsp; через&nbsp; <em>v( P)</em>,&nbsp; а ее рабочую оценку -
через&nbsp;&nbsp; <em>V( Р)</em>.&nbsp; Пусть&nbsp; <em>Р<sub>1</sub></em>,
&nbsp; ...,&nbsp; <em>Р<sub>n</sub></em>&nbsp; -&nbsp; разрешенные
преемники позиции&nbsp; <em>Р</em>.&nbsp; Тогда
соотношения между статическими и рабочими
оценками можно записать так:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>V( Р)&nbsp; =&nbsp; v( P)</em></p>

<p>если&nbsp; <em>Р</em>&nbsp; -&nbsp; терминальная позиция
дерева поиска (<em>n=</em>0)</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>V( Р)&nbsp; =&nbsp; </em>max<em> V( Р<sub>i</sub>
)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<sup>&nbsp;&nbsp;&nbsp; i</sup></em></p>

<p>если&nbsp; <em>P</em>&nbsp; -&nbsp; позиция с ходом МАКС'а</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>V( Р)&nbsp; =&nbsp; </em>min<em> V( Р<sub>i</sub>
)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<sup>&nbsp;&nbsp;&nbsp; i</sup></em></p>

<p>если&nbsp; <em>Р</em>&nbsp; -&nbsp; позиция с ходом МИН'а</p>
<a name="tn167"><script language="JavaScript">line();</script>


<p><small>% <span id="t167">Минимаксная процедура</span>:
минимакс( Поз, ЛучшПоз, Оц)<br>
% Поз - позиция, Оц - ее минимаксная оценка;<br>
% лучший ход из Поз ведет в позицию ЛучшПоз</small></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>минимакс( Поз,
ЛучшПоз, Оц) :-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ходы( Поз, СписПоз),&nbsp; !,</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<small>% СписПоз - список разрешенных ходов</small><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<strong>лучш( СписПоз, ЛучшПоз, Оц);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
стат_оц( Поз, Оц).</strong>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<small>% Поз не имеет преемников</small></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>лучш( [Поз], Поз, Оц) :-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
минимакс( Поз, _, Оц),&nbsp; !.</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; лучш( [Поз1 |
СписПоз], ЛучшПоз, ЛучшОц) :-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
минимакс( Поз1, _, Оц1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
лучш( СписПоз, Поз2, Оц2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
выбор( Поз1, Оц1, Поз2, Оц2, ЛучшПоз, ЛучшОц).</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; выбор( Поз0, Оц0, Поз1,
Оц1, Поз0, Оц0) :-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ход_мина( Поз0), Оц &gt; Оц1,&nbsp; !;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ход_макса( Поз0), Оц &lt; Оц1,&nbsp; !.</strong></p>

<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; выбор( Поз0, Оц0, Поз1,
Оц1, Поз1, Оц1).</strong></p>
<script language="JavaScript">line();</script>


<p align="center"><small><strong>Рис. 15. 3.</strong>&nbsp; Упрощенная
реализация минимаксного принципа.</small></p>

<p>Программа на Прологе, вычисляющая минимаксную
рабочую оценку для некоторой заданной позиции,
показана на рис. 15.3. Основное отношение этой
программы -</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>минимакс( Поз,
ЛучшПоз, Оц)</strong></p>

<p>где <strong>Оц</strong>&nbsp; -&nbsp; минимаксная оценка
позиции <strong>Поз</strong>, а <strong>ЛучшПоз</strong> -
наилучшая позиция-преемник позиции <strong>Поз</strong>
(лучший ход, позволяющий достигнуть оценки <strong>Оц</strong>).
Отношение</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>ходы( Поз, СписПоз)</strong></p>

<p>задает разрешенные ходы игры: <strong>СписПоз</strong>
- это список разрешенных позиций-преемников
позиции <strong>Поз</strong>. Предполагается, что цель <strong>ходы</strong>
имеет неуспех, если <strong>Поз</strong> является
терминальной поисковой позицией (листом дерева
поиска). Отношение</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>лучш( СписПоз,
ЛучшПоз, ЛучшОц)</strong></p>

<p>выбирает из списка позиций-кандидатов <strong>СписПоз</strong>
&quot;наилучшую&quot; позицию <strong>ЛучшПоз</strong>. <strong>ЛучшОц</strong>
- оценка позиции <strong>ЛучшПоз</strong>, а
следовательно, и позиции <strong>Поз</strong>. Под
&quot;наилучшей&quot; оценкой мы понимаем либо
максимальную, либо минимальную оценку, в
зависимости от того, с чьей стороны ожидается
ход.</p>

<hr>
</a>

<p align="center"><a href="ch15_1.htm">Назад</a> | <a href="index.htm">Содержание</a>
| <a href="ch15_3.htm">Вперёд</a></p>
</body>
<script language="JavaScript">

hl();

</script>

</html>
